# demo5 数据预取和状态

当业务存在异步请求，在渲染页面时候需要提前将这下数据获取，才能渲染出完整的页面。
所以需要在业务组件中，把所有的异步请求写在一个函数中，方便在路由跳转前，将这些数据全部取出来。
另一个问题，服务端已经在渲染的时候将数据获取了，那么到浏览器端没必要再请求一遍，如何将数请求完毕后数据同步到浏览器端。那就必须使用状态管理了。

## 服务器端数据预取

获取url对应匹配到的所有组件，然后全部执行完`asyncData`后，开始渲染。并且把状态序列化为 `window.__INITIAL_STATE__`，注入 HTML

## 客户端数据预取

客户端数据预取官网给出了两种方案：1. 在路由导航之前解析数据。[2.匹配要渲染的视图后](../demo5-mixin)

本实例采用的是第一种方案，在切换时候会有明显的卡顿感，所以必须有一个类似loading的加载指示器提升用户体验。

首次加载页面不会重新产生请求。


